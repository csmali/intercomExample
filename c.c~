#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/shm.h>
#define SHMKEY 1234567
int main(void)
{
	char *padr;
	char *x;
	char line[50];
	int shmid;
	int shmid2;
	if ((shmid = shmget(SHMKEY, 1024, IPC_CREAT|0666)) < 0) {
		perror("shmget");
		exit(1);
	}
	if ((padr = (char *) shmat(shmid, NULL, 0)) == (void *) -1) {
		perror("shmat");
		exit(1);
	}
		
	if ((shmid2 = shmget(SHMKEY, 1024, IPC_CREAT|0444)) < 0) {
		perror("shmget");
		exit(1);
	}
	if ((x = (char *) shmat(shmid2, NULL, 100)) == (void *) -1) {
		perror("shmat");
		exit(1);
	}
	strcpy(padr,"");
	while(1){
		scanf("%s",line);
		strcpy(padr,line);
		*(x+1000)='w';
		if(strcmp(padr,"quit")==0){
			break;		
		}
	}
	
	
	shmdt(padr);
	shmctl(shmid, IPC_RMID, NULL);
	return 0;
}
